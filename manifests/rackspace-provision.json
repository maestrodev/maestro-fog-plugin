{
  "name" : "rackspace provision",
  "description" : "Provision servers in Rackspace",
  "class": "MaestroDev::RackspaceWorker",
  "task":{
    "command" : "/rackspace/provision",
    "inputs" :  {
      "username": {
        "description": "Rackspace username",
        "required": true, 
        "type": "String", 
        "value": null
      },
      "api_key": {
        "description": "Rackspace API key",
        "required": true, 
        "type": "Password", 
        "value": null
      }, 
      "version": {
        "description": "API version to use: v1 or v2 for Open Cloud Servers",
        "required": false, 
        "type": "String", 
        "value": "v2"
      }, 
      "endpoint": {
        "description": "endpoint used for Rackspace v2, choosing the region to use",
        "required": false, 
        "type": "String", 
        "value": "https://dfw.servers.api.rackspacecloud.com/v2"
      }, 
      "auth_url": {
        "description": "authentication endpoint, default to https://auth.api.rackspacecloud.com for US accounts, https://lon.auth.api.rackspacecloud.com for UK ones",
        "required": false, 
        "type": "String", 
        "value": "https://auth.api.rackspacecloud.com"
      }, 
      "image_id": {
        "description": "id of the image to use (ie. c195ef3b-9195-4474-b6f7-16e5bd86acd0 for CentOS 6.3 in v2)",
        "required": true, 
        "type": "String", 
        "value": "c195ef3b-9195-4474-b6f7-16e5bd86acd0"
      }, 
      "flavor_id": {
        "description": "Flavor id that defines ram, cpu,...",
        "required": true, 
        "type": "Integer", 
        "value": 1
      }, 
      "public_key": {
        "description": "public key content to copy to the server as authorized key",
        "required": false, 
        "type": "String", 
        "value": null
      },
      "public_key_path": {
        "description": "path to public key to copy to the server as authorized key",
        "required": false, 
        "type": "String", 
        "value": "/var/local/maestro-agent/.ssh/id_rsa.pub"
      }
    },
    "outputs" : {
      "rackspace_ips": {"type" : "Array"},
      "rackspace_ids": {"type" : "Array"}
    },
    "icon":"rackspace.png"
  },
  "source_types": [
    {
      "name" : "rackspace",
      "options" : {
        "username": "String",
        "api_key": "Password",
        "version": "String",
        "endpoint": "String",
        "auth_url": "String",
        "image_id": "String",
        "flavor_id": "Integer",
        "public_key": "String"
      }
    }
  ]
}
